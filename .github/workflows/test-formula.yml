name: Test Formula

on:
  workflow_dispatch:
  push:
    paths:
      - "Formula/mayaflux-dev.rb"
      - ".github/workflows/test-formula.yml"

jobs:
  test-formula:
    runs-on: macos-14
    steps:
      - uses: actions/checkout@v4

      - name: Tap local formula
        run: brew tap mayaflux/mayaflux ${{ github.workspace }}

      - name: Install mayaflux-dev
        run: brew install mayaflux-dev

      - name: Verify installation
        run: |
          ls -la /opt/homebrew/opt/mayaflux-dev/
          echo "âœ… Installation successful"
