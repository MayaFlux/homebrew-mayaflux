name: Test Formula

on:
  workflow_dispatch:
  # push:
  #   paths:
  #     - "Formula/mayaflux-dev.rb"
  #     - ".github/workflows/test-formula.yml"

jobs:
  test-formula:
    strategy:
      matrix:
        include:
          - os: macos-14
            name: "macOS ARM64"
          - os: macos-15-intel
            name: "macOS Intel"
    runs-on: ${{ matrix.os }}
    name: ${{ matrix.name }}
    
    steps:
      - uses: actions/checkout@v4

      - name: Tap local formula
        run: brew tap mayaflux/mayaflux ${{ github.workspace }}

      - name: Install mayaflux-dev
        run: brew install mayaflux-dev

      - name: Verify installation
        run: |
          ls -la /opt/homebrew/opt/mayaflux-dev/ || ls -la /usr/local/opt/mayaflux-dev/
          echo "âœ… Installation successful"
